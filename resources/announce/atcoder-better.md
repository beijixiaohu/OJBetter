## 1.20.0

- 新增 "翻译文本颜色" 自定义功能，可在设置中配置翻译结果的文本颜色
- 修复 MarkDown 转换时 `<br>` 换行符丢失的问题
- 修复复制 MarkDown 时字符被 HTML 转义的问题（如 `&lt;` `&gt;`）
- 修复 MarkDown 转换时未过滤 `<style>` 标签的问题
- 修复中文括号替换规则导致 Markdown 链接语法错误的问题
- 修复有道翻译的 HTTP 状态码判断逻辑
- 改进按钮元素添加 `type='button'` 属性，避免表单误提交
- 改进翻译复制按钮在禁用状态下的提示文本
- 改进代码提交表单的构建方式，简化代码结构

## 1.19.0

- 移除了对 Greasyfork 脚本仓库的依赖
- 更换默认更新源为阿里云OSS
- 修复某些题目页按钮样式错误的问题
- 改进：调整 GPT 默认提示词

## 1.18.0

- 添加 "样例测试结果检查器" 选项
- 添加 "显示同场题目列表" 功能，感谢 **@wrk-123** 的贡献
- 修复黑暗模式为 "跟随系统" 时，代码块美化未正确切换主题的问题
- 修复有道翻译错误的问题
- 修复 "分段翻译" 模式下等待间隔失效的问题
- 修复查询 API 余量时存在的问题，感谢 **@x1uc** 的贡献
- 修复覆盖层类名冲突的问题
- 完善网站本地化规则，感谢 **@nr0728**、**@user111192**、**@qjwh**  的贡献
  
## 1.17.0

- **更换公共库 CDN 为[南科大镜像](https://mirrors.sustech.edu.cn/help/cdnjs.html)，原因见 [issue](https://github.com/beijixiaohu/OJBetter/issues/151)**

- 修复 submissions 页面代码"展开/折叠"按钮无效的问题

- 调整设置页面的布局结构

## 1.16.1

- 修复 网站本地化报错的问题

## 1.16.0

- 添加 "ChatGPT 翻译提示词自定义" 和 "作为系统提示词"的选项 感谢 **@Dawn-Xu-helloworld** 的协作
- 添加 代码提交确认弹窗显示题目名，
- 添加 自动翻译 选项
- 添加 样例通过自动提交 选项（默认关闭）
- 更换 "有道翻译" 的接口
- 修复 代码块美化中存在 `&nbsp;` 符号的问题
- 修复 主题设置为 follow 时 Monaco 编辑器未正确应用主题的问题 感谢 **@cscnk52** 的贡献
- 修复 行间 LaTeX 未正确替换的问题，修复相关正则的性能问题
- 修复 重新翻译时"收起旧的结果"报错的问题
- 修复  MarkDown 转换时未过滤 script 标签的问题
- 修复 一些比赛无法跳转至洛谷的问题
- 修改 clist rating 的颜色为 AtCoder 的颜色规则
- 使用 polyfill 以兼容不支持 dialog.showModal() 方法的浏览器（比如 Firefox79）

## 1.15.2

- 移除已无意义的方法：判断文本是否可能为代码

## 1.15.0

- MarkDown 数据中不再包含行间代码块
- 完善网站本地化规则
- 改进了判断文本为代码片段的相关方法
- 修复 “美化代码块” 功能报错 not defined 的问题
- 修复 `OJB_observeElement()` 方法报错的问题
- 修复网站本地化方法 `strictTraverseTextNodes()` 无效的问题

## 1.14.2

- 修复黑暗模式下编辑器的一处样式错误
- 修复代码编辑器语言选择初始值错误的问题
- 修复在非 chrome 浏览器中，代码编辑器初始化异常的问题

## 1.14.0

- 修复在某些情况下代码编辑器未正确加载的问题 感谢 @smart_stupid @acstor 的反馈

## 1.13.0

> **本次更新同步了 Codeforces Better v1.68 - 1.74 的更改到 AtCoder Better**

- 增加跳转到 VJudge 的按钮
- 增加“美化代码块”功能，使用monaco编辑器替换页面上的pre代码块，这也会改善黑暗模式下的代码显示效果
- 改进 Clist Rating 的各个请求方法，以解决没有正确获取数据的问题 
- 改进 ChatGPT 翻译的 prompt，并修复可能产生的注入错误导致翻译结果不全的问题
- 改进 LaTeX 替换/还原的相关代码，现在其可以在多重嵌套的情况下正确还原
- 增强网站本地化方法的健壮性
- 调整黑暗模式的相关代码，使用变量以便于统一样式和管理
- 更换 CDN staticfile.org 为 staticfile.net
- 修复题单页面一些题目的 clist rating 可能显示未找到的问题

- 修复题目集页面 clist 分数显示异常的问题
- 修复代码在线测试中差异对比样式未对齐的问题
- 修复 deepl 429 报错后未正确显示提示信息的问题
- 修复题目页 Clist Rating 可能会显示未找到的问题
- 修复洛谷跳转方法在旧版本 Tampermonkey 中报错的问题

- 修复当 MathJax 库文件未正确加载时，会发生意外的死循环导致页面卡死的问题
- 修复 DeepL 免费模式翻译时未正确显示 翻译中提示信息 的问题
- 修复脚本可能未正确加载的问题
- 修复相邻的 LaTeX 公式间的排版可能被破坏的问题

- 一些其他调整和改进

------

- 将网站本地化的数据独立为外部 JSON，以便于维护
- 脚本支持国际化，同时使用 crowdin 平台以自动化本地化工作
- 更换一些按钮为图标按钮
- 添加对 DeepL API 的支持，包括官方的 api-free、api-pro 和 deeplx，感谢 @Vistarin 的建议
- 添加对 deepl 和 chatgpt 配置余额查询的支持，注意这还需要你的服务商支持并提供相应的 API
- 添加对翻译前的文本判断，如果其疑似代码片段，则不会自动翻译，且点击翻译前也会弹窗提示
- 添加选择翻译服务目标语言的功能
- 添加关于页面，以及更新频道、更新源选择项
- 添加调试维护页面，包括缓存刷新，数据清除，导入导出
- 添加自定义选项： "‘代码编辑器提交按钮位置" ，默认为底部，感谢 @lishufood 的建议
- 改进各个加载函数，移除一些不必要的等待关系，加快脚本加载时间
- 改进翻译功能的相关方法，以及报错信息的显示方式
- 改进自动翻译的性能，以及可能无法自动翻译的问题
- 改进代码样例在线运行的相关代码
- 改进运行结果差异对比方法 codeDiff()
- 改进 dialog 窗口为背景内容不再会随鼠标一起滚动
- 改进代码编辑器固定到右侧，底部，全屏时的样式，感谢 @lishufood 的建议
- 改进 .html2md-panel 面板在 simple 模式下的显示效果
- 改进设置面板中配置页面的样式
- 修复 acmsguru 题目题目页编辑器报错的问题
- 修复问题页代码编辑器在切换网站的 移动/桌面 版本后报错的问题
- 修复 getMarkdown() 方法的一处错误，其错误的将数据直接存储到 DOM 中，导致页面性能下降
- 修复关闭‘折叠块自动展开’后折叠块内的翻译按钮不显示的问题，感谢 @MoYuToGo 的反馈
- 由于"不等待页面资源完全加载"选项理论上已无意义，故重命名以取消之前可能的选中状态
- 调整了大量的代码结构
- **大量的 css class 重命名，因此如果你使用了stylus自定义样式，可能需要调整**
- 一些其他的调整和改进

------

- 修复 ChatGPT 配置面板不显示的问题，感谢 @caoxuanming 的反馈
- 添加一个配置开关 "鼠标滚动锁定" ，默认开启， 感谢 @liuhao6 的建议

------

- 更新 clist rating 的API为v4，调整题目页的数据获取方式为通过API获取，感谢 @wrkwrk 的建议
- 添加 ChatGPT 翻译 “流式传输” 选项，默认开启
- 修复 Google 翻译结果为空的问题 感谢 @shicxin 的反馈
- 添加一个配置开关 "代码提交是否二次确认" ，默认开启 感谢 @Rikkual 的建议
- 在完整题目集页中添加小区域的按钮
- 修复完整题目集页右键打印时不显示翻译结果的问题 感谢 @zfs732 的反馈

------

- 在题目页下方添加代码编辑器，支持在线代码测试、代码提交等，具体请阅读 信息 页
- 修复插入脚本按钮、翻译结果时会被当做题目描述更改的问题
- 完善 组合混搭管理 页面的汉化
- 增加 "自动翻译短文本" 功能, 默认关闭
- 改进翻译等待间隔的实现方式，现在等待间隔全局生效
- 改进 "显示目标区域范围" 的实现方式
- 完善黑暗模式，改进样例元素的 hover 样式 感谢 @SUPERLWR 的反馈
- 增加设置面板选项: 翻译-过滤文本中的\*\*号 感谢 @Dog_E 、CreMicro 的反馈
- 修复关闭“显示加载提示信息”后，Clist Rating 无法正常显示的问题，感谢 Vistarin 的反馈
- 一些其他改进和修复