<h1 id="codeforces-better🎈">Codeforces Better!🎈</h1>
<p>Codeforces介面漢化、黑暗模式支援、主題翻譯、markdown視圖、一鍵複製題目、跳到洛谷、評論區分頁、ClistRating分顯示、榜單重新著色</p>
<div style="background-color: #FFF3E0;color: #FF5722;border: 1px solid #FF5722;">
  <div style="border: 8px solid #ffffff00;">
    <center>
      <h3>寫在前面：反饋須知</h3>
    </center>
    <p>如遇問題，請先閱讀下方的 <a style="color:#F44336" href="#常见问题">#常見問題</a> 說明。如果沒有解決，請前往 <a style="color:#F44336"
        href="https://greasyfork.org/zh-CN/scripts/465777/feedback">回饋頁</a> 或 <a style="color:#F44336"
        href="https://github.com/beijixiaohu/OJBetter/issues">Github issues</a> 回饋。</p>
    <p>請提供關於問題的詳細描述，例如：鏈接，截圖，期望的結果、實際的結果，復現方式……</p>
    <p>另外也歡迎友善的討論以及功能建議，但維護腳本以及提供幫助並不是作者的義務，感謝你的理解。</p>
  </div>
</div>
<h2 id="功能">功能</h2>
<span style="color:#009688; background-color: #E0F2F1;">提示：腳本的部分功能提供了配置項，你可以點選 <strong>整個頁面右上角</strong> 的<strong><code>CodeforcesBetter設定</code></strong> 按鈕開啟設定面板。</span>
<h3 id="界面汉化">介面漢化</h3>
<p>將網站的主要元素漢化為中文（可關閉）</p>
<h3 id="题目翻译">題目翻譯</h3>
<p>在題目、blog、留言等的右上角加入翻譯按鈕，一鍵即可翻譯為中文，同時確保不破壞Latex公式</p>
<p>在此基礎上，腳本提供了三種翻譯模式：</p>
<ul>
  <li>普通模式：會一次翻譯整個區域的內容</li>
  <li>分段模式：會對區域內的每一個 <code>&#60;&#112;&#47;&#62;</code> 和 <code>&#60;&#105;&#47;&#62;</code> 標籤依序翻譯</li>
  <li>選段模式：你可以自由點選頁面上的任何 <code>&#60;&#112;&#47;&#62;</code> 和 <code>&#60;&#105;&#47;&#62;</code> 標籤進行翻譯</li>
</ul>
<p>你可以在右上角的 <code>CodeforcesBetter設定</code> 面板中選擇你想使用的翻譯服務（預設為DeepL）以及切換腳本的工作模式。</p>
<div style="background-color: #FFF3E0;color: #FF5722;border: 1px solid #FF5722;">
  <div style="border: 8px solid #ffffff00;">
    <p><strong>注意：</strong>分段/選段模式會產生下列問題：</p>
    <p>- 使得翻譯介面無法知曉整個文字的上下文訊息，會降低翻譯品質。</p>
    <p>- 會有部分內容不會被翻譯/不能被選中，因為它們不是&#60;&#112;&#47;&#62;或&#60;&#105;&#47;&#62;元素</p>
  </div>
</div>
<p>腳本提供如下翻譯介面可供選擇：（預設為DeepL）</p>
<table style="border: 1px solid #bcaaa4;">
  <thead>
    <tr>
      <th style="background-color: #f2f2f2; border-bottom: 1px solid #bcaaa4; color: black;">&nbsp;
      </th>
      <th style="background-color: #f2f2f2; border-bottom: 1px solid #bcaaa4; color: black;">KEY
      </th>
      <th style="background-color: #f2f2f2; border-bottom: 1px solid #bcaaa4; color: black;">翻譯品質</th>
      <th style="background-color: #f2f2f2; border-bottom: 1px solid #bcaaa4; color: black;">可靠性</th>
      <th style="background-color: #f2f2f2; border-bottom: 1px solid #bcaaa4; color: black;">字元數上限
      </th>
      <th style="background-color: #f2f2f2; border-bottom: 1px solid #bcaaa4; color: black;">耗時</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="background-color: #1976D2; color: #E3F2FD;">DeepL翻譯（✨推薦）</td>
      <td style="background-color: #f9f9f9; color: black;">不需要</td>
      <td style="background-color: #f9f9f9; color: black;">⭐️⭐️⭐️⭐️</td>
      <td style="background-color: #FFC107; color: #3e2723;">部分地區可能無法訪問或較慢</td>
      <td style="background-color: #f9f9f9; color: black;">5000</td>
      <td style="background-color: #f9f9f9; color: black;">快</td>
    </tr>
    <tr>
      <td style="background-color: #f9f9f9; color: black;">訊飛聽見翻譯</td>
      <td style="background-color: #f9f9f9; color: black;">不需要</td>
      <td style="background-color: #f9f9f9; color: black;">⭐️⭐️⭐️</td>
      <td style="background-color: #f9f9f9; color: black;">通常可靠</td>
      <td style="background-color: #f9f9f9; color: black;">2000</td>
      <td style="background-color: #f9f9f9; color: black;">快</td>
    </tr>
    <tr>
      <td style="background-color: #f9f9f9; color: black;">有道翻譯</td>
      <td style="background-color: #f9f9f9; color: black;">不需要</td>
      <td style="background-color: #f9f9f9; color: black;">⭐️⭐️</td>
      <td style="background-color: #f9f9f9; color: black;">通常可靠</td>
      <td style="background-color: #FFC107; color: #3e2723;">600</td>
      <td style="background-color: #f9f9f9; color: black;">快</td>
    </tr>
    <tr>
      <td style="background-color: #f9f9f9; color: black;">Google翻譯</td>
      <td style="background-color: #f9f9f9; color: black;">不需要</td>
      <td style="background-color: #f9f9f9; color: black;">⭐️⭐️⭐️</td>
      <td style="background-color: #FFC107; color: #3e2723;">需要當前網路能順利存取Google</td>
      <td style="background-color: #f9f9f9; color: black;">5000</td>
      <td style="background-color: #f9f9f9; color: black;">快</td>
    </tr>
    <tr>
      <td style="background-color: #f9f9f9; color:black;">彩雲翻譯</td>
      <td style="background-color: #f9f9f9; color: black;">不需要</td>
      <td style="background-color: #f9f9f9; color: black;">⭐️⭐️</td>
      <td style="background-color: #f9f9f9; color: black;">通常可靠</td>
      <td style="background-color: #f9f9f9; color: black;">5000</td>
      <td style="background-color: #f9f9f9; color: black;">快</td>
    </tr>
    <tr>
      <td style="background-color: #1976D2; color: #E3F2FD;">使用ChatGPT翻譯（✨推薦）</td>
      <td style="background-color: #f9f9f9; color: black;">需要API Key</td>
      <td style="background-color: #f9f9f9; color: black;">⭐️⭐️⭐️⭐️⭐️</td>
      <td style="background-color: #f9f9f9; color: black;">取決於服務商品質以及OpenAI 的擁擠程度</td>
      <td style="background-color: #f9f9f9; color: black;">取決於模型</td>
      <td style="background-color: #FFC107; color: #3e2723;">較慢</td>
    </tr>
  </tbody>
</table>
<span style="color:#009688; background-color: #E0F2F1;">提示：右鍵<strong>翻譯</strong>按鈕，可以快速切換翻譯服務哦</span>
<p><strong>自動翻譯</strong></p>
<p>開啟"自動翻譯"後，對於<code>.ttypography</code>, <code>.comments</code> 區域中的短文本，當其進入瀏覽器視窗的<u>可視區域</u>時，自動進行翻譯</p>
<p>（設定面板中可指定多少字元以內為短文字）</p>
<p>此外，開啟"評論區快速翻譯"後，對於評論區中的短文本，自動翻譯時會在候選的服務中隨機選擇一個，並行地進行快速翻譯</p>
<p><strong>歷史翻譯恢復</strong></p>
<p>開啟"自動復原歷史翻譯"後，會將<u>題目頁面</u>上的翻譯資訊自動儲存到瀏覽器本機的indexDB 的CFBetterDB 資料庫的translateData 表中</p>
<p>刷新/ 下次進入頁面時會自動恢復翻譯訊息</p>
<h3 id="ClistRating分">ClistRating分</h3>
<p>取得clist.by 網站的Rating 分數據，並展示</p>
<p>注意，不同頁面工作所需的憑證有所不同：</p>
<ul>
  <li>對於比賽問題集頁（contest），需要瀏覽器中clist.by 網站的登入cookie 有效，<strong>或</strong>在設定面板中填寫api key</li>
  <li>對於題目頁（problem）和題單頁（problemset），需要瀏覽器中clist.by 的登入cookie 有效</li>
</ul>
<span style="background-color: #FFF3E0;color: #FF5722;">腳本不取得clist.by 的特定cookie ，cookie 資訊由瀏覽器傳送請求時自動攜帶，cookie 有效性透過嘗試要求所傳回的狀態碼判斷</span>
<h3 id="编辑器与LSP">編輯器與LSP</h3>
<p><strong>題目頁新增編輯器</strong></p>
<p>在題目頁的下方加入monaco 程式碼編輯器(預設開啟)</p>
<p>支援程式碼自動儲存、程式碼快捷提交、線上測試運行、LSP、靜態補全增強等功能</p>
<p><strong>程式碼自動儲存</strong></p>
<p>程式碼會自動儲存在瀏覽器本機的IndexedDB 的CFBetterDB 資料庫的editorCode 表中</p>
<p><strong>線上測試運行</strong></p>
<p>你可以一鍵測試運行題目中的範例，還可以自訂測試範例，範例資料會自動儲存在CFBetterDB 資料庫的editorCode 表中</p>
<p>腳本提供了多個線上程式碼運行服務：codeforces官方、wandbox（第三方）、rextester（第三方），它們所支援的參數選項有所不同。</p>
<div style="background-color: #FFF3E0;color: #FF5722;border: 1px solid #FF5722;">
  <div style="border: 8px solid #ffffff00;">
    <p><strong>注意：</strong></p>
    <ul>
      <li>
        <p>顯然，所有線上程式碼運行服務均無法測試互動式題目</p>
      </li>
      <li>
        <p>第三方線上程式碼運行服務的運作環境與codeforces 的環境可能有所不同，在第三方線上程式碼運行服務中能夠運行或結果正確的程式碼並不一定在codeforces 中同樣如此</p>
      </li>
      <li>
        <p>無法保證你的程式碼不會被第三方線上程式碼運行服務以某種方式洩露</p>
      </li>
      <li>
        <p>此外，為擴大適用範圍，頁面上的編譯器選項與第三方線上程式碼運行服務實際的編譯器選項也並不是嚴格對應的，因此很有可能得到意外的結果。</p>
      </li>
    </ul>
  </div>
</div>
<p><strong>LSP</strong></p>
<p>配置好LSP 後，可以為編輯器提供以下功能（限C++、Python語言）：</p>
<ul>
  <li>自動補全、方法簽名提示、程式碼修復</li>
  <li>hover提示、inlay提示、文件鏈接</li>
  <li>轉到定義、轉到引用、符號引用點擊高亮</li>
  <li>格式化、部分格式化、漸進式自動格式化、折疊範圍分析、重新命名</li>
</ul>
<p>當然，其不支援本地編譯，不支援斷點調試，不支援多文件等……，性能上也是不及本地的專門的IDE 的</p>
<p>總之，該功能的實際意義和用處並不大，如果你對此感興趣，請查看後文的常見問題部分以了解更多</p>
<p><strong>靜態補全增強</strong></p>
<p>你可以在設定面板-Monaco-靜態補全增強-自訂中為monaco 編輯器新增自訂的靜態程式碼補全規則</p>
<p>補全規則為JSON 格式，下面是一個範例(monaco格式):</p>
<pre>
  {
    "suggestions": [
        {
            "label": "hello world",
            "kind": 15,
            "documentation": "The is a hello world snippet",
            "insertText": "hello world"
        },
        // 其他 suggestions...
    ]
}
</pre>
<p>你可以使用 <a href="https://microsoft.github.io/monaco-editor/docs.html#interfaces/languages.CompletionItem.html"> CompletionItem </a>中幾乎所有的屬性，(注意: 不要填入range 屬性，腳本會自動計算並加入該屬性)</p>
<h2 id="其他功能">其他功能</h2>
<ul>
  <li>在主題、blog、回復等的右上角新增 <code>MrakDown視圖</code> 按鈕以及 <code>複製</code> 按鈕</li>
  <li>讓Codeforces 支援黑暗模式，預設跟隨系統</li>
  <li>展開折疊塊，自動展開所有的折疊塊</li>
  <li>洛谷跳轉，一鍵跳到該題在洛谷對應的頁面</li>
  <li>評論區分頁，支援翻頁、跳轉、可選擇每頁顯示的主樓數</li>
  <li>渲染優化，為折疊塊元素新增渲染限制（contain: layout style;）</li>
  <li>名單重新著色，對於採用Codeforces 賽制的比賽的榜單，按照「得分/總分」所在的範圍為分數重新漸變著色</li>
</ul>
<h2 id="兼容性">相容性</h2>
<p><strong>瀏覽器</strong></p>
<table style="border: 1px solid #bcaaa4;">
  <thead>
    <tr style="background-color: #f2f2f2;">
      <th style="border-bottom: 1px solid #bcaaa4;">&nbsp;</th>
      <th style="border-bottom: 1px solid #bcaaa4;">支援</th>
      <th style="border-bottom: 1px solid #bcaaa4;">最低版本</th>
    </tr>
  </thead>
  <tbody>
    <tr style="background-color: white;">
      <td style="background-color: #009688; color: #ffffff;">Chrome</td>
      <td style="background-color: #009688; color: #ffffff;">支援</td>
      <td style="background-color: #f9f9f9;">96</td>
    </tr>
    <tr style="background-color: white;">
      <td style="background-color: #009688; color: #ffffff;">Edge</td>
      <td style="background-color: #009688; color: #ffffff;">支援</td>
      <td style="background-color: #f9f9f9;">96</td>
    </tr>
    <tr style="background-color: white;">
      <td style="background-color: #f9f9f9;">國產Chromium套殼</td>
      <td style="background-color: #FFC107; color: #3e2723;">基本上相容，但可能出現意外的錯誤</td>
      <td style="background-color: #FFC107; color: #3e2723;">Chromium 內核版本≥96</td>
    </tr>
    <tr style="background-color: white;">
      <td style="background-color: #009688; color: #ffffff;">FireFox（含行動端）</td>
      <td style="background-color: #009688; color: #ffffff;">支援</td>
      <td style="background-color: #f9f9f9;">103</td>
    </tr>
    <tr style="background-color: white;">
      <td style="background-color: #f9f9f9;">Safari</td>
      <td style="background-color: #f9f9f9; background-color: #f44336; color: white;">不支援</td>
      <td style="background-color: #f9f9f9; background-color: #f44336; color: white;">\</td>
    </tr>
  </tbody>
</table>
<p><strong>腳本管理器</strong></p>
<p>僅在Tampermonkey（篡改猴）腳本管理器中進行測試，不保證在Greasemonkey，Violentmonkey，ScriptCat 等中的兼容性</p>
<p><strong>其他插件</strong></p>
<p>與主流CF相關外掛程式不存在相容性問題，如果你遇到了相容性問題，歡迎回饋。</p>
<p><strong>鏡像站</strong></p>
<p>支援官方輕量站 <a href="https://m1.codeforces.com">m1</a> / <a href="https://m2.codeforces.com">m2</a> / <a
    href="https://m2.codeforces.com">m3</a> 、官方鏡像站 <a
    href="https://mirror.codeforces.com/">https://mirror.codeforces.com/</a>、非官方鏡像站 <a
    href="https://codeforc.es">https://codeforc.es</a></p>
<p>此外，理論上也相容於任意的其他鏡像站，你只需要自行再加入一行註解 <code>// @match 你的鏡像站網址</code> 即可</p>
<h2 id="常见问题">常見問題</h2>
<div style="border: 1px solid #aaa;">
  <div style="border: 8px solid #ffffff00;"><details><summary>Q. 如何開始？</summary>
      <div style="border: 8px solid #ffffff00;">
        A. 你需要先安裝 <a href="https://www.tampermonkey.net/">Tampermonkey</a> ，然後再安裝該腳本
      </div>
    </details></div>
</div><div style="border: 1px solid #aaa;">
  <div style="border: 8px solid #ffffff00;"><details><summary>Q. 更新錯誤？</summary>
      <div style="border: 8px solid #ffffff00;">
        <p>A. 由於Greasy Fork 平台的原因，當新版本剛發佈時，可能會出現實際更新/安裝的卻是上一個版本的情況，</p>
        <p>通常你只需要稍等幾分鐘，然後再次前往更新/安裝。</p>
        <p>你也可以將滑鼠移到腳本的更新提示框中的紅色問號上，然後點擊彈出訊息底部的「暫不更新」 按鈕。</p>
      </div>
    </details></div>
</div><div style="border: 1px solid #aaa;">
  <div style="border: 8px solid #ffffff00;"><details><summary>Q. 一直顯示載入中？</summary>
      <div style="border: 8px solid #ffffff00;">
        A. 請開啟設定面板中的”相容選項-不等待頁面資源載入“ 選項
      </div>
    </details></div>
</div><div style="border: 1px solid #aaa;">
  <div style="border: 8px solid #ffffff00;"><details><summary>Q. 使用DeepL 翻譯報錯Too many requests ？</summary>
      <div style="border: 8px solid #ffffff00;">
        <p>A. 這通常是因為你短時間內頻繁翻譯，或者一次性翻譯了超過5000字符的文本導致的，DeepL對翻譯字數和頻率是有限制的，</p>
        <span style="background-color: #FFF3E0;color: #FF5722;">這是暫時的，一段時間後就恢復正常了</span>
      </div>
    </details></div>
</div><div style="border: 1px solid #aaa;">
  <div style="border: 8px solid #ffffff00;"><details><summary>Q. 使用DeepL 翻譯報錯undefind 或一直顯示翻譯中？</summary>
      <div style="border: 8px solid #ffffff00;">
        A. 這通常是因為你所使用的網路無法正常存取 <a href="https://www.deepl.com">www.deepl.com</a>
      </div>
    </details></div>
</div><div style="border: 1px solid #aaa;">
  <div style="border: 8px solid #ffffff00;"><details><summary>Q. 翻譯結果中一些公式顯示為 {xx} / [xx] / 【xx】？</summary>
      <div style="border: 8px solid #ffffff00;">
        A. 使用普通翻譯介面（DeepL/有道/google）進行翻譯時，受腳本的實作方式所限，可能會出現{xx}/[xx]/【xx】
        <div style="border: 8px solid #ffffff00;"></div>
        <div style="background-color: #E3F2FD;color: #1565C0;border: 1px solid #1565c0;">
          <div style="border: 8px solid #ffffff00;">
            <p><strong>腳本對公式的處理方式</strong></p>
            <p>為了保護LaTeX公式在翻譯時不被破壞，腳本會先取出所有的LaTeX公式，並使用替換符{xx}/[xx]/【xx】來佔位，</p>
            <p>由於這些替換符大機率不會在翻譯的過程中遭到破壞，因此可以在翻譯後再根據替換符還原回LaTeX公式。</p>
            <p>這種實現方式能如期工作的前提是替換符不被破壞，這在絕大多數情況下都是沒有問題的，</p>
            <p>但有時翻譯服務會破壞替換符，例如【23】 變成了【23 / 23】 / [23]/ 【23 】/ 23 】，這些情況下腳本會透過一定的正規規則進行還原，使其仍然可以如期工作</p>
            <p>但如果翻譯服務還破壞了更多的內容，產生了歧義，例如翻譯服務將【2】 313 變成了【2312，這時就無法還原了，</p>
            <p>對於各個翻譯服務，不同的替換符本身遭到破壞的機率有所不同，你可以在右上角的設定面板中選擇不同的替換符，</p>
            <p>經過測試，通常 <code>{}</code> 表現的效果更好，因此這也是腳本預設使用的替換符</p>
          </div>
        </div>
        <div style="border: 10px solid #ffffff00;"></div>
        <div style="background-color: #E0F2F1;color: #009688;border: 1px solid #009688;">
          <div style="border: 8px solid #ffffff00;">
            <p><strong>提示：</strong></p>
            <p>在使用ChatGPT 進行翻譯時不會存在這個問題，因為可以透過提示詞直接告訴ChatGPT “保持其中的LaTeX公式不翻譯”，</p>
            <p>聰明的ChatGPT 可以很好的遵守這一點，這也是腳本推薦的翻譯方式。</p>
          </div>
        </div>
      </div>
    </details></div>
</div><div style="border: 1px solid #aaa;">
  <div style="border: 8px solid #ffffff00;"><details><summary>Q. 如何使用ChatGPT 翻譯？</summary>
      <div style="border: 8px solid #ffffff00;">
        A. 如果你可以直接訪問OpenAI 的接口，並且擁有帳號，那麼非常棒，你只需要選中“使用ChatGPT翻譯(API)”，然後點擊下方的“添加” 按鈕新建一個配置並填寫即可。
        <p>此外，你也可以購買api 代理服務來使用ChatGPT，下表收集了一些api 服務商，你可以選擇使用
        </p>
        <table style="border: 1px solid #bcaaa4;">
          <thead>
            <tr style="background-color: #f2f2f2;">
              <th style="border-bottom: 1px solid #bcaaa4;">&nbsp;</th>
              <th style="border-bottom: 1px solid #bcaaa4;">官網</th>
              <th style="border-bottom: 1px solid #bcaaa4;">獲取方式</th>
            </tr>
          </thead>
          <tbody>
            <tr style="background-color: white;">
              <td style="background-color: #f9f9f9;">API2D</td>
              <td style="background-color: #f9f9f9;"><a href="https://api2d.com/" target="_blank"
                  class="url">https://api2d.com/</a></td>
              <td style="background-color: #f9f9f9;">官網</td>
            </tr>
            <tr style="background-color: white;">
              <td style="background-color: #f9f9f9;">CloseAI</td>
              <td style="background-color: #f9f9f9;"><a href="https://console.closeai-asia.com/" target="_blank"
                  class="url">https://console.closeai-asia.com/</a></td>
              <td style="background-color: #f9f9f9;">官網</td>
            </tr>
            <tr style="background-color: white;">
              <td style="background-color: #f9f9f9;">OhMyGPT</td>
              <td style="background-color: #f9f9f9;"><a href="https://aigptx.top/" target="_blank"
                  class="url">https://aigptx.top/</a></td>
              <td style="background-color: #f9f9f9;">官網</td>
            </tr>
            <tr style="background-color: white;">
              <td style="background-color: #f9f9f9;">OpenAI-SB</td>
              <td style="background-color: #f9f9f9;"><a href="https://openai-sb.com/" target="_blank"
                  class="url">https://openai-sb.com/</a></td>
              <td style="background-color: #f9f9f9;">Telegram機器人</td>
            </tr>
            <tr style="background-color: white;">
              <td style="background-color: #f9f9f9;">API2GPT</td>
              <td style="background-color: #f9f9f9;"><a href="https://www.api2gpt.com/" target="_blank"
                  class="url">https://www.api2gpt.com/</a></td>
              <td style="background-color: #f9f9f9;">官網</td>
            </tr>
            <tr style="background-color: white;">
              <td style="background-color: #f9f9f9;">AI Proxy</td>
              <td style="background-color: #f9f9f9;"><a href="https://aiproxy.io/" target="_blank"
                  class="url">https://aiproxy.io/</a></td>
              <td style="background-color: #f9f9f9;">官網</td>
            </tr>
          </tbody>
        </table>
        <div style="border: 10px solid #ffffff00;"></div>
        <div style="background-color: #FFF3E0;color: #FF5722;border: 1px solid #FF5722;">
          <div style="border: 8px solid #ffffff00;">
            <p><strong>免責：</strong></p>
            <p>作者僅為收集分享，沒有獲得任何收益，亦不保證上述平台的穩定性，平台的任何行為均與作者無關。</p>
            <p>建議小額儲值，用完再充，這些服務商可能會跑路</p>
          </div>
        </div>
        <p>如果你使用的是api 代理服務商提供的服務，設定中的KEY 應該填寫api代理服務商提供的key，</p>
        <p>此外，你還需要在設定中額外填寫Proxy API，</p>
        <p>Proxy API 需要填寫完整的位址，這裡以 <a href="https://console.closeai-asia.com/">CloseAI</a> 為例，其提供了API
          Base：<code>https://api.closeai-proxy.xyz</code></p>
        <p>那麼Proxy API 後面要填的就是 <code>https://api.closeai-proxy.xyz/v1/chat/completions</code>，</p>
        <span style="background-color: #FFF3E0;color: #FF5722;">注意：由於你指定了自訂的API，Tampermonkey會對你的跨域請求進行警告，請自行點擊授權</span>
        <div style="border: 10px solid #ffffff00;"></div>
        <span style="background-color: #FFF3E0;color: #FF5722;">注意：如果你想使用Azure OpenAI，由於其與OpenAI 官方的介面參數不一樣，你可以選擇自行部署<a href="https://github.com/stulzq/azure-openai-proxy">azure-openai-proxy</a>以進行轉換</span>
      </div>
    </details></div>
</div><div style="border: 1px solid #aaa;">
  <div style="border: 8px solid #ffffff00;"><details><summary>Q. 什麼是LSP？</summary>
      <div style="border: 8px solid #ffffff00;">
        A. <a href="https://microsoft.github.io/language-server-protocol/">LSP（Language Server Protocol）</a>是由微軟發起的一種編輯器與語言伺服器之間通訊的協定規範。
        <p>它將傳統IDE需要實現的程式碼補全、診斷、建議、文件甚至專案管理等功能與編輯器分離，使用獨立的服務來完成這些功能，</p>
        <p>而編輯器只需要按照協定規範與伺服器進行通訊即可，這樣就大大減少了工作量，同時使編輯器可以輕鬆地支援各種程式語言</p>
        <p>目前LSP的生態已經逐步完善，主流編輯器都支援LSP或有了對應的插件，如VSCode、Vim、Emacs等...</p>
        <p>但各大商業IDE廠商對此興趣不大，基本現有的LSP Server都是開源社群在維護，因此仍不及專業IDE以及各種專業的插件</p>
      </div>
    </details></div>
</div><div style="border: 1px solid #aaa;">
  <div style="border: 8px solid #ffffff00;"><details><summary>Q. 如何使用LSP？</summary>
      <div style="border: 8px solid #ffffff00;">
        A. 只需兩步驟：
        <p>一：腳本提供了對C++ 和Python 語言以下兩個LSP Server 實作的支持，你需要按需安裝它們：</p>
        <table>
          <thead>
            <tr>
              <th style="background-color: #f2f2f2; border-bottom: 1px solid #bcaaa4; color: black;">語言</th>
              <th style="background-color: #f2f2f2; border-bottom: 1px solid #bcaaa4; color: black;">LSP Server</th>
              <th style="background-color: #f2f2f2; border-bottom: 1px solid #bcaaa4; color: black;">安裝方式（Windows下）</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="background-color: #f9f9f9; color: black;">C++</td>
              <td style="background-color: #f9f9f9; color: black;">clangd</td>
              <td style="background-color: #f9f9f9; color: black;">在 <a href="https://github.com/clangd/clangd/releases">clangd release</a> 中下載clangd，然後在系統環境變數的path 中新增clangd 的路徑，例如 <code>C:\clangd_16.0.2\bin\</code></td>
            </tr>
            <tr>
              <td style="background-color: #f9f9f9; color: black;">Python</td>
              <td style="background-color: #f9f9f9; color: black;">pylsp</td>
              <td style="background-color: #f9f9f9; color: black;">執行指令：
                <code>pip install "python-lsp-server[all]"</code>，其會自動加入環境變量</td>
            </tr>
          </tbody>
        </table>
        <p>二：你還需要在 <a href="https://github.com/beijixiaohu/OJBetter/releases">GitHub release</a> 或 <a
            href="https://mxyowl.lanzouj.com/b0cui6bgj">藍奏雲(密碼:aaaa)</a> 下載並解壓縮OJBetter_Bridge，該軟體是腳本與LSP Server 通訊的橋樑，</p>
        <p>將解壓縮後的資料夾放到C盤根目錄或其他任何你喜歡的位置（注意：如果你放在其他位置，你需要在設定面板中要修改"工作路徑"為你的實際位置。）</p>
        <p>然後你就可以執行OJBetter_Bridge 了，其提供了GUI版本和終端版本，Windows下推薦使用GUI版本，直接執行 <code>server_gui.exe</code> 即可</p>
        <p>OJBetter_Bridge 在啟動時會自動檢查指令clangd 和pylsp 是否有效，並給予提示。</p>
        <span style="color:#009688; background-color: #E0F2F1;">提示：在 <code>server_gui.exe</code> 的介面中可以設定讓其開機自啟</span>
        <p>完成上述步驟後，你就可以開啟設定面板中的"使用LSP" 並使用了。</p>
        <div style="border: 1px solid #aaa;">
          <div style="border: 8px solid #ffffff00;">
            <details>
              <summary>了解更多？</summary>
              <div style="border: 8px solid #ffffff00;">
                對於clangd，在cpp_workspace 資料夾中存放了兩個設定檔 <code>.clangd</code>、<code>.clang-format</code>
                <p>它們分別定義了clangd 的 <a href="https://clangd.llvm.org/config">配置項目</a> 和 <a
                    href="https://clang.llvm.org/docs/ClangFormatStyleOptions.html">代碼格式化風格</a>，你可以自行編輯修改</p>
              </div>
            </details>
          </div>
        </div>
      </div>
    </details></div>
</div><div style="border: 1px solid #aaa;">
  <div style="border: 8px solid #ffffff00;"><details><summary>Q. 為什麼clangd 格式化無效？</summary>
      <div style="border: 8px solid #ffffff00;">
        A. 這是因為你在設定面板中填寫的LSP 工作路徑不正確</a>
      </div>
    </details></div>
</div><div style="border: 1px solid #aaa;">
  <div style="border: 8px solid #ffffff00;"><details><summary>Q. 為什麼clangd 無法辨識我的 <code>&#60;&#98;&#105;&#116;&#115;&#47;&#115;&#116;&#100;&#99;&#43;&#43;&#46;&#104;&#62;</code> 頭檔？</summary>
      <div style="border: 8px solid #ffffff00;">
        A. 這是因為 <code>&#60;&#98;&#105;&#116;&#115;&#47;&#115;&#116;&#100;&#99;&#43;&#43;&#46;&#104;&#62;</code> 不是標準頭文件，因此clangd 預設不支持，你需要在OJBetter_Bridge 的cpp_workspace
        中的 <code>.clangd 19Better_Bridge 的cpp_workspace 17中的</code> .clangd 19Better編譯器參數來告訴clang 要去哪裡找到這個非標準的頭檔(當然也不建議使用萬用頭)</a>
      </div>
    </details></div>
</div><div style="border: 1px solid #aaa;">
  <div style="border: 8px solid #ffffff00;"><details><summary>Q. 靜態補全增強可不可以使用本地的JSON 檔案？</summary>
      <div style="border: 8px solid #ffffff00;">
        A. 由於瀏覽器的安全限制，你並不能直接使用形如 <code>file:///xxx</code> 的URL 來在瀏覽器中存取你的本機JSON 檔案。
        <p>不過你可以藉助OJBetter_Bridge 來做到，很簡單，你只要將JSON 檔案 <code>xxx.json</code> 放置到OJBetter_Bridge 的/mycomplet 資料夾中</p>
        <p>啟動OJBetter_Bridge，就可以在設定面板中新建配置，JSON URL為：<code>http://127.0.0.1:2323/mycomplet/xxx.json</code>。</p>
        <div style="background-color: #E0F2F1;color: #009688;border: 1px solid #009688;">
          <div style="border: 8px solid #ffffff00;">
            <p><strong>試一試？</strong></p>
            <p>啟動OJBetter_Bridge，初始情況下/mycomplet 資料夾中自帶一個範例JSON 檔案：<code>template.json</code>， 因此你可以新增一個配置，填入
              <code>http://127.0.0.1:2323/mycomplet/template.json</code> 並保存</p>
            <p>現在在編輯器中輸入hello，你將會看到兩個補全項：hello world、hello world2</p>
          </div>
        </div>
      </div>
    </details></div>
</div>
<h2 id="贡献代码">貢獻程式碼</h2>
<p>歡迎貢獻代碼，請前往 <a href="https://github.com/beijixiaohu/OJBetter">Github倉庫</a> 建立PR</p>
<h2 id="其他OJ?">其他OJ?</h2>
<p>由於作者精力有限，並不會維護太多的類似腳本，如果你想為喜歡的OJ 移植該腳本，非常歡迎，你只需要遵守GPL-3.0 license 許可即可</p>
<h2 id="感谢">感謝</h2>
<ul>
  <li>早期開發中參考了以下腳本：<a href="https://greasyfork.org/zh-CN/scripts/441750">AcWing content to markdown</a>、<a
      href="https://greasyfork.org/zh-CN/scripts/378277">翻譯機</a></li>
  <li>CodeforcesBetter 腳本使用了以下開源函式庫：<a href="https://github.com/mixmark-io/turndown">turndown</a>、<a
      href="https://jquery.com/">jquery</a>、<a href="https://www.mathjax.org/">MathJax</a><a
      href="https://dexie.org/"><a
      href="https://github.com/brix/crypto-js">crypto-js</a>、<a href="">base64</a>、<a
      href="https://github.com/gka/chroma.js">chroma</a>、<a href="http://xtermjs.org/"></a></a>
  </li>
  <li>OJBetter_Bridge 參考了以下倉庫<a
      href="https://github.com/moeakwak/monaco-language-server">monaco-language-server</a>，使用了以下開源函式庫：<a
      href="https://github.com/zhiyiYo/PyQt-Fluent-Widgets">PyQt-Fluent-Widgets</a>、<a
      href="https://pypi.org/project/PyYAML/">PyYAML</a>、<a href="https://pypi.org/project/tornado/">tornado</a>、<a
      href="https://pypi.org/project/ujson/">ujson</a>
  </li>
  <li>特別感謝所有提供回饋和建議的朋友。</li>
</ul>
<p>感謝你們，0rz</p>